// ====================================================================== //
//				HiMECS Main DSP Program
// ====================================================================== //
//	- Author: Taewan Kim (System Control Lab.)
//	- Copyright: Hyundai Heavy Industries Co., Ltd. 
// ====================================================================== //
//	- File: Slave_DSP_Internal_Thermo.c
// ---------------------------------------------------------------------- //
//	- Description: 
//		Source file for control Internal Thermo-Sensor.(TSC2003)
// ---------------------------------------------------------------------- //
//	- Revision History -
// ---------------------------------------------------------------------- //
//		2011-10-20:	Draft
// ====================================================================== //


// ====================================================================== //
//	Includes
// ====================================================================== //
#include "DSP2833x_Device.h"	
#include "DSP2833x_Examples.h"
#include "Slave_DSP_Parameter.h"
#include "Slave_DSP_I2C.h"
#include "Slave_DSP_Internal_Thermo.h"


// ====================================================================== //
//	Functions
// ====================================================================== //


// ====================================================================== //
//	Function: Internal_Thermo_Update
//		- Measure Internal Board Temperature.
// ---------------------------------------------------------------------- //
float Internal_Thermo_Update (void)
{
	Uint16 I2C_Data = 0;
	float Temp = 0;

	// Send Command to measure temperature.
	Write_I2C_Data(INTERNAL_THERMO_ADDR,MEASURE_TEMP0);
	DELAY_US(20);
	// Get 12-bit measure data.
	I2C_Data = Read_I2C_Data(0x48);

	// Convert data to Temperature.
	Temp = ((float)I2C_Data*(-0.0172))+300.99;

	return Temp;	
}
// ====================================================================== //


// ====================================================================== //




// ====================================================================== //
// End of file.
// ====================================================================== //


